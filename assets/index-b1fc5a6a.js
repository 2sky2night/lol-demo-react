import{g as p,j as n,a as m,F as f,L as k}from"./index-030662f5.js";import{r as o}from"./react-037e1d06.js";import{P as u}from"./pubsub-js-611c51e3.js";import{i as g}from"./echarts-7c7ebfb3.js";import{c as S}from"./react-redux-1a8bf358.js";import{c as y,a as I}from"./like-376d6465.js";import{c as v,f as x}from"./react-router-cbed85ef.js";import"./react-dom-fe255453.js";import"./scheduler-04ce0582.js";import"./react-router-dom-99c1988a.js";import"./@remix-run-65e438cc.js";import"./redux-b28dc3b0.js";import"./classnames-4e0763b2.js";import"./@babel-19082deb.js";import"./redux-devtools-extension-f615a6f4.js";/* empty css             */import"./@ant-design-343e2dc3.js";import"./@ctrl-66c25352.js";import"./rc-util-ba9409c6.js";import"./axios-aba6f0e0.js";import"./hoist-non-react-statics-7556f55f.js";import"./react-is-3e8633c1.js";import"./use-sync-external-store-9f93952d.js";import"./tslib-54e39b60.js";import"./zrender-ba1047a7.js";const L=e=>p(`/hero/${e}.js?ts=2801123`);function N(e){const{icon:r,changeHandler:t,index:a,current:s}=e;function l(){t(a)}return n("li",{className:`swiper-btn ${s===a?"swiper-active":""}`,onClick:l,children:n("img",{src:r})})}function b(e){const{bigSkins:r,smallSkins:t}=e,[a,s]=o.useState(0),l=o.createRef(),d=1300;function c(i){s(i),u.publish("swiper-change",i)}return m("div",{className:"swiper",children:[n("ul",{style:{left:`-${a*d}px`},className:"swiper-box",ref:l,children:r.map(i=>n("li",{children:n("img",{src:i})},i))}),n("ul",{className:"swiper-bts",children:t.map((i,h)=>n(N,{current:a,index:h,icon:i,changeHandler:c},i))})]})}const w=(e,r)=>{const t=g(e);r&&t.setOption(r)};function K(e,r){const t={radar:{indicator:[{name:"物理攻击",max:10},{name:"魔法攻击",max:10},{name:"防御能力",max:10},{name:"上手难度",max:10},{name:"背锅率",max:10}]},series:[{type:"radar",data:[{value:[e.attack,e.magic,e.defense,e.difficulty,Math.round(Math.random()*10)]}]}]};w(r,t)}const H=e=>{switch(e){case"assassin":return"刺客";case"fighter":return"战士";case"mage":return"法师";case"marksman":return"射手";case"support":return"辅助";case"tank":return"坦克"}};function C(e){return n("li",{className:"hero-type",children:H(e.value)})}function B(e){const r=v(),[t,a]=o.useState(""),[s,l]=o.useState(!1);u.subscribe("send-hero-data",(c,i)=>{a(i)}),o.useEffect(()=>{if(e.likeList){const c=e.likeList.some(i=>i.heroId===t);l(c)}e.heroList.length||r("/")},[t]);function d(){if(s)e.cancelLike(t),l(!1);else{const c=e.heroList.findIndex(i=>i.heroId===t);e.addLike(e.heroList[c]),l(!0)}}return n("button",{onClick:d,className:`like-btn ${s?"like-hero":""}`,children:s?"已收藏":"收藏"})}function P(e){return{likeList:e.like.likeList,heroList:e.hero.heroList}}function E(e){return{addLike(r){e(y(r))},cancelLike(r){e(I(r))}}}const $=S(P,E)(B);function T(e){const r=o.useRef(),{heroInfor:t,heroSkins:a}=e,[s,l]=o.useState(0),d=t.roles.map(c=>n(C,{value:c},c));return o.useEffect(()=>{K(t,r.current),u.publish("send-hero-data",t.heroId)},[]),u.subscribe("swiper-change",(c,i)=>{l(i)}),m("div",{className:"hero-infor",children:[n("h4",{children:a[s]}),n("h1",{children:t.title}),n("ul",{className:"hero-type-box",children:d}),n("div",{className:"charts",ref:r}),n($,{})]})}function j(e){const{spellKey:r,name:t,description:a,current:s}=e;function l(){return r.length===1?r.toUpperCase():"被动技能"}return m("li",{className:`${s===r?"skill-active":""} skill-des-item`,children:[n("div",{children:m("h3",{children:[n("span",{className:"skill-name",children:t}),m("span",{children:[l()," "]})]})}),n("div",{children:a})]})}function D(e){const r=[];return r.push(e[e.findIndex(t=>t.spellKey==="passive")]),r.push(e[e.findIndex(t=>t.spellKey==="q")]),r.push(e[e.findIndex(t=>t.spellKey==="w")]),r.push(e[e.findIndex(t=>t.spellKey==="e")]),r.push(e[e.findIndex(t=>t.spellKey==="r")]),r}function F(e){let{spells:r}=e;const[t,a]=o.useState("passive");return r=D(r),m("div",{className:"hero-skill",children:[n("h2",{children:"英雄技能"}),m("div",{className:"hero-information-box",children:[n("ul",{className:"spell-icons",children:r.map(s=>n("li",{className:t===s.spellKey?"active":"",onClick:()=>a(s.spellKey),children:n("img",{src:s.abilityIconPath})},s.name))}),n("ul",{className:"spell-des",children:r.map(s=>n(j,{current:t,name:s.name,spellKey:s.spellKey,description:s.description},s.spellKey))})]})]})}function le(){o.useEffect(()=>{window.scroll(0,0),document.title="英雄详情"},[]);const e=x(),[r,t]=o.useState({}),[a,s]=o.useState([]),[l,d]=o.useState([]);return o.useEffect(()=>{(async function(){const i=await L(e.heroId);t(i),s(i.skins.map(h=>h.mainImg).filter(h=>h!=="")),d(i.skins.map(h=>h.iconImg).filter(h=>h!==""))})()},[]),n("div",{className:"page",children:r.spells?n("div",{className:"hero-infor-main",children:m(f,{children:[n(b,{bigSkins:a,smallSkins:l}),n(T,{heroInfor:r.hero,heroSkins:r.skins.filter(c=>c.chromas==="0").map(c=>c.name)}),m("div",{className:"hero-story",children:[n("h2",{children:"英雄故事"}),m("div",{className:"hero-information-box",children:["  ",r.hero.shortBio]})]}),n(F,{spells:r.spells})]})}):n(k,{})})}export{le as default};
